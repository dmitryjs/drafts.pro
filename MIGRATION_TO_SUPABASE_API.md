# –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Supabase API - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

1. **–°–æ–∑–¥–∞–Ω `server/supabase-server.ts`** - Supabase –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞
2. **–°–æ–∑–¥–∞–Ω `server/storage_supabase.ts`** - –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Supabase API
3. **–û–±–Ω–æ–≤–ª–µ–Ω `server/storage.ts`** - —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Supabase API –≤–º–µ—Å—Ç–æ Postgres
4. **–û–±–Ω–æ–≤–ª–µ–Ω `server/db.ts`** - –±–æ–ª—å—à–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç DATABASE_URL
5. **–û–±–Ω–æ–≤–ª–µ–Ω `server/replit_integrations/auth/replitAuth.ts`** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç memorystore –≤–º–µ—Å—Ç–æ Postgres

## üîß –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

### –®–∞–≥ 1: –î–æ–±–∞–≤–∏—Ç—å Service Role Key (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è –ø–æ–ª–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –ë–î –Ω—É–∂–µ–Ω Service Role Key:

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Supabase Dashboard** ‚Üí **Settings** ‚Üí **API**
2. –ù–∞–π–¥–∏—Ç–µ **Service Role Key** (—Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á)
3. –î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
   ```
   SUPABASE_SERVICE_ROLE_KEY=–≤–∞—à_service_role_–∫–ª—é—á
   ```

**–í–∞–∂–Ω–æ:** –ï—Å–ª–∏ Service Role Key –Ω–µ —É–∫–∞–∑–∞–Ω, –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω `VITE_SUPABASE_ANON_KEY` (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞).

### –®–∞–≥ 2: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `.env` –µ—Å—Ç—å:

```
VITE_SUPABASE_URL=https://ionriyybabiuebxwmvoc.supabase.co
VITE_SUPABASE_ANON_KEY=–≤–∞—à_anon_–∫–ª—é—á
# SUPABASE_SERVICE_ROLE_KEY=–≤–∞—à_service_role_–∫–ª—é—á (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```

### –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

```bash
npm run dev
```

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

- ‚úÖ –û—à–∏–±–∫–∞ `ENOTFOUND db.*.supabase.co` –∏—Å—á–µ–∑–Ω–µ—Ç
- ‚úÖ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –ü—Ä–æ—Ñ–∏–ª–∏ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å (—Å–æ–∑–¥–∞–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, –ø–æ–ª—É—á–µ–Ω–∏–µ)
- ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Supabase Auth

## ‚ö†Ô∏è –ß—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

- **–ó–∞–¥–∞—á–∏** (`getTasks`, `getTaskBySlug`) - –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤/undefined
- **–ë–∞—Ç–ª—ã, –º–µ–Ω—Ç–æ—Ä—ã, —Ç–µ—Å—Ç—ã** - –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ Supabase API

–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è MVP - –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

## üîÑ –ö–∞–∫ –≤–µ—Ä–Ω—É—Ç—å—Å—è –æ–±—Ä–∞—Ç–Ω–æ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø—Ä—è–º–æ–º—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é –∫ Postgres:

1. –í `server/storage.ts` –∑–∞–º–µ–Ω–∏—Ç–µ:
   ```typescript
   export const storage = new SupabaseStorage();
   ```
   –Ω–∞:
   ```typescript
   export const storage = new DatabaseStorage();
   ```

2. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `server/db.ts` –∏–∑ git –∏—Å—Ç–æ—Ä–∏–∏

3. –î–æ–±–∞–≤—å—Ç–µ `DATABASE_URL` –≤ `.env`

## üìù –§–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã

- ‚úÖ `server/supabase-server.ts` - –Ω–æ–≤—ã–π —Ñ–∞–π–ª
- ‚úÖ `server/storage_supabase.ts` - –Ω–æ–≤—ã–π —Ñ–∞–π–ª
- ‚úÖ `server/storage.ts` - –∏–∑–º–µ–Ω–µ–Ω —ç–∫—Å–ø–æ—Ä—Ç
- ‚úÖ `server/db.ts` - –æ—Ç–∫–ª—é—á–µ–Ω Postgres
- ‚úÖ `server/replit_integrations/auth/replitAuth.ts` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç memorystore

## üöÄ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —Å–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î.
