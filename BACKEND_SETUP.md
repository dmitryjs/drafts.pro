# üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Backend –¥–ª—è MVP

## –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

–ü–æ—Å–ª–µ —ç—Ç–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π backend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **DatabaseStorage** —á–µ—Ä–µ–∑ Drizzle ORM, —á—Ç–æ –¥–∞—ë—Ç –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã.

---

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `.env` —Ñ–∞–π–ª–∞

–î–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ—Ä–Ω–µ–≤–æ–π `.env` —Ñ–∞–π–ª —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```env
# ============================================
# SUPABASE - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
# ============================================

# URL –≤–∞—à–µ–≥–æ Supabase –ø—Ä–æ–µ–∫—Ç–∞ (–Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ Dashboard ‚Üí Settings ‚Üí API)
VITE_SUPABASE_URL=https://[PROJECT-REF].supabase.co

# –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á (anon key) - –±–µ–∑–æ–ø–∞—Å–µ–Ω –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Service Role Key - –¢–û–õ–¨–ö–û –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞, –ù–ò–ö–û–ì–î–ê –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ!
# –ù–∞—Ö–æ–¥–∏—Ç—Å—è –≤ Dashboard ‚Üí Settings ‚Üí API ‚Üí service_role (—Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á)
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# –ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Postgres (–¥–ª—è Drizzle ORM)
# –§–æ—Ä–º–∞—Ç: postgresql://postgres:[PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres
# –ü–∞—Ä–æ–ª—å: –Ω–∞–π–¥–∏—Ç–µ –≤ Dashboard ‚Üí Settings ‚Üí Database ‚Üí Database password
DATABASE_URL=postgresql://postgres:[–í–ê–®_–ü–ê–†–û–õ–¨]@db.[PROJECT-REF].supabase.co:5432/postgres

# ============================================
# –û–ü–¶–ò–û–ù–ê–õ–¨–ù–û
# ============================================

# –î–ª—è Replit –¥–µ–ø–ª–æ—è (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ)
# REPL_ID=your-repl-id

# –î–ª—è AI —Ñ—É–Ω–∫—Ü–∏–π (Polza AI)
# POLZA_AI_API_KEY=your-api-key

# –ü–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 5000)
# PORT=5000

# –û–∫—Ä—É–∂–µ–Ω–∏–µ (development/production)
# NODE_ENV=development
```

---

### 2. –ì–¥–µ –Ω–∞–π—Ç–∏ —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –≤ Supabase?

1. **VITE_SUPABASE_URL** –∏ **VITE_SUPABASE_ANON_KEY**:
   - Dashboard ‚Üí Settings ‚Üí API
   - Project URL = `VITE_SUPABASE_URL`
   - anon public = `VITE_SUPABASE_ANON_KEY`

2. **SUPABASE_SERVICE_ROLE_KEY**:
   - Dashboard ‚Üí Settings ‚Üí API
   - service_role (—Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á) = `SUPABASE_SERVICE_ROLE_KEY`
   - ‚ö†Ô∏è **–í–ê–ñ–ù–û**: –≠—Ç–æ—Ç –∫–ª—é—á –¥–∞—ë—Ç –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ, —Ö—Ä–∞–Ω–∏—Ç–µ –≤ —Å–µ–∫—Ä–µ—Ç–µ!

3. **DATABASE_URL**:
   - Dashboard ‚Üí Settings ‚Üí Database
   - Connection string ‚Üí Connection pooling ‚Üí Direct connection
   - –ò–ª–∏ —Å–æ–±–µ—Ä–∏—Ç–µ –≤—Ä—É—á–Ω—É—é:
     ```
     postgresql://postgres:[PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres
     ```
   - –ü–∞—Ä–æ–ª—å: Dashboard ‚Üí Settings ‚Üí Database ‚Üí Database password (Reset password –µ—Å–ª–∏ –∑–∞–±—ã–ª–∏)

---

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `.env`, –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:

```bash
npm run dev
```

–í –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:
```
‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
serving on http://127.0.0.1:5000
```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É:
```
‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö: ...
```
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `DATABASE_URL` –≤ `.env`

---

## ‚úÖ –ß—Ç–æ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç?

–ü–æ—Å–ª–µ —ç—Ç–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π **–≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ backend —Ä–∞–±–æ—Ç–∞—é—Ç**:

- ‚úÖ –ü—Ä–æ—Ñ–∏–ª–∏ (—Å–æ–∑–¥–∞–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, –ø–æ–ª—É—á–µ–Ω–∏–µ)
- ‚úÖ –ó–∞–¥–∞—á–∏ (—Å–ø–∏—Å–æ–∫, —Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ)
- ‚úÖ –†–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á (–æ—Ç–ø—Ä–∞–≤–∫–∞, –ø–æ–ª—É—á–µ–Ω–∏–µ, –ø—Ä–æ–≤–µ—Ä–∫–∞ –ò–ò)
- ‚úÖ –ë–∞—Ç–ª—ã (—Å–æ–∑–¥–∞–Ω–∏–µ, —É—á–∞—Å—Ç–∏–µ, –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏)
- ‚úÖ –ú–µ–Ω—Ç–æ—Ä—ã, —Å–ª–æ—Ç—ã, –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚úÖ –õ–∞–π–∫–∏, –∏–∑–±—Ä–∞–Ω–Ω–æ–µ, —á–µ—Ä–Ω–æ–≤–∏–∫–∏
- ‚úÖ XP —Å–∏—Å—Ç–µ–º–∞
- ‚úÖ –ö–æ–º–ø–∞–Ω–∏–∏
- ‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

**–ß—Ç–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ:**
- `VITE_SUPABASE_URL` ‚úÖ
- `VITE_SUPABASE_ANON_KEY` ‚úÖ

**–ß—Ç–æ –ù–ò–ö–û–ì–î–ê –Ω–µ –¥–æ–ª–∂–Ω–æ –ø–æ–ø–∞–¥–∞—Ç—å –Ω–∞ –∫–ª–∏–µ–Ω—Ç:**
- `SUPABASE_SERVICE_ROLE_KEY` ‚ùå
- `DATABASE_URL` ‚ùå

–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `VITE_` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º –∫–æ–¥–µ.  
–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ **–±–µ–∑** `VITE_` –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞"
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `DATABASE_URL` –≤ `.env`

### –û—à–∏–±–∫–∞: "connection refused"
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ä–æ–ª—å –≤ `DATABASE_URL`
‚Üí –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### –û—à–∏–±–∫–∞: "relation does not exist"
‚Üí –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç `supabase_schema.sql` –≤ Supabase Dashboard ‚Üí SQL Editor

---

## üìù –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ –∫–æ–¥–µ?

1. **`server/db.ts`** - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Drizzle ORM
2. **`server/storage.ts`** - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–æ –Ω–∞ `DatabaseStorage` –≤–º–µ—Å—Ç–æ `SupabaseStorage`

–¢–µ–ø–µ—Ä—å backend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–ø—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Postgres** —á–µ—Ä–µ–∑ Drizzle, —á—Ç–æ –¥–∞—ë—Ç:
- ‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏
- ‚úÖ –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ TypeScript
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–ø—Ä—è–º—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã)
- ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ –æ—Ç–ª–∞–¥–∫–∏

---

–ì–æ—Ç–æ–≤–æ! üéâ
